.. _hippoproc:

.. title:: hippunfold

Pre-processing with ``hippunfold``
============================================================

Hippocampal feature post-processing with ``z-brains`` relies heavily on `hippunfold <https://https://hippunfold.readthedocs.io/>`_, 
an openly available hippocampal segmentation tool that models the topological folding structure of this region.

.. admonition:: The Brain Imaging Data Structure (BIDS) 

	The `Brain Imaging Data Structure (BIDS) <https://bids.neuroimaging.io>`_ is a widely used directory and file naming convention in brain imaging. To run ``hippunfold``, and subsequently ``z-brains``, your raw data needs to be conform to BIDS standards. 

``hippunfold`` enables surface-based sampling of image intensities and calculation of hippocampal thickness from an input anatomical scan.
``z-brains`` subquently uses these surface-mapped for feature smoothing and normalization of available features across participants. 

.. admonition:: What should I use as an input to ``hippunfold``?

	We recommend to use the main structural scan generated by ``micapipe``, i.e. the ``nativepro`` T1w scan as input to ``hippunfold``. This way, all generated hippocampal surfaces will be in the same space as other features of interest, which are also co-registered to this space. 


Hippocampal thickness
--------------------------------------------------------

Hippocampal thickness is directly calculated from surfaces generated from inner and outer surfaces output by ``hippunfold`` for each participant. 


FLAIR, qT1, MD, and FA
--------------------------------------------------------

Image intensity of available features in your dataset can be sampled along each hippocampal surface. Note that these images should be in the same space as the surfaces generated by ``hippunfold``.

